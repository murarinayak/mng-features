<mat-card>
  <div class="row">
    <div class="col-auto pe-0">
      <button mat-icon-button [ngClass]="{ 'invisible': !item.canToggle }" class="icon-small mt-2"
        (click)="toggleBlock(!expanded)">
        @if (!expanded) {
          <mat-icon>chevron_right</mat-icon>
        }
        @if (expanded) {
          <mat-icon>expand_more</mat-icon>
        }
      </button>
    </div>
    <div class="col-auto px-0" cdkDragHandle>
      <mat-icon class="mat-icon-circle" [ngStyle]="{ backgroundColor: item?.['color'] }">{{ item?.['icon'] }}</mat-icon>
    </div>
    <div class="col py-2 ps-0">
      <h4 class="title mb-0">{{ item?.label }}</h4>
      <p class="subtitle mb-1">{{ item?.value }}</p>
    </div>
    <div class="col-auto">
      @if (item?.actions) {
        <button mat-icon-button [matMenuTriggerFor]="menu" class="icon-small mt-2">
          <mat-icon>more_vert</mat-icon>
        </button>
      }
    </div>
  </div>
  @if (expanded) {
    <div class="ms-4">
      <ng-content></ng-content>
    </div>
  }
</mat-card>

<mat-menu #menu="matMenu">
  @for (item of item?.actions; track item) {
    <button mat-menu-item color="primary" (click)="onActionItemClick(item)">
      <mat-icon>{{ item.icon }}</mat-icon>{{ item.label }}
    </button>
  }
</mat-menu>